{"ast":null,"code":"import _asyncToGenerator from \"D:/VSCode/CorruptedDominion/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Campanha, NPC } from 'src/app/models/campanha';\nlet PrimariosComponent = class PrimariosComponent {\n  constructor(service, modalService) {\n    this.service = service;\n    this.modalService = modalService;\n    this.campanha = \"HW\";\n    this.info = new Campanha();\n    this.isEdit = false;\n    this.isAdmin = false;\n    this.senha = \"\";\n  }\n  ngOnInit() {\n    if ('campanha' in sessionStorage) {\n      this.campanha = sessionStorage.getItem('campanha');\n    }\n    if (this.campanha == \"HW\") {\n      this.getCampanha();\n    }\n    if (\"isAdmin\" in sessionStorage) {\n      this.isAdmin = sessionStorage.getItem(\"isAdmin\") == \"sim\";\n    }\n  }\n  alerta(mensagem) {\n    alert(mensagem);\n  }\n  getCampanha() {\n    this.service.getCampanha().subscribe(response => {\n      this.info = response;\n    }, error => {\n      alert(\"Um erro ocorreu enquanto recuperava as informações da campanha, cheque a internet.\");\n    });\n  }\n  openModal(template) {\n    this.modalRef = this.modalService.show(template);\n    //this.modalRef.hide();\n  }\n  decline() {\n    if (this.modalRef != undefined) {\n      this.modalRef.hide();\n    }\n  }\n  addNPC() {\n    if (!this.info.npcs) {\n      this.info.npcs = [];\n    }\n    this.info.npcs.push(new NPC({\n      \"descricao\": \"Descrição do novo NPC\",\n      \"nome\": \"Novo NPC\",\n      \"urlImagem\": \"\",\n      \"tipo\": 1\n    }));\n  }\n  deleteNPC(i) {\n    this.info.npcs.splice(i, 1);\n  }\n  editar() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.isEdit = false;\n      let cripto = yield _this.service.hashString(_this.senha);\n      if (_this.service.validate(cripto)) {\n        _this.service.putCampanha(_this.info).subscribe(response => {\n          _this.decline();\n        }, error => {\n          alert(\"Um erro ocorreu enquanto salvava as informações da campanha, cheque a internet.\");\n        });\n      } else {\n        alert(\"senha incorreta\");\n      }\n    })();\n  }\n  onEdit() {\n    this.isEdit = !this.isEdit;\n  }\n};\nPrimariosComponent = __decorate([Component({\n  selector: 'primarios',\n  templateUrl: './primarios.component.html',\n  styleUrls: ['./primarios.component.scss']\n})], PrimariosComponent);\nexport { PrimariosComponent };","map":null,"metadata":{},"sourceType":"module"}